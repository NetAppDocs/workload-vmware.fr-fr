---
sidebar: sidebar 
permalink: upload-vm-inventory.html 
keywords: vm workloads, capture vm details 
summary: Vous pouvez utiliser le Centre de planification pour télécharger des informations sur votre environnement VMware actuel. 
---
= Télécharger les données d'inventaire des machines virtuelles vers NetApp Workload Factory
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Avant de pouvoir créer un plan de migration, vous devez télécharger vos données d’inventaire de machines virtuelles.

.Étapes
. Connectez-vous à Workload Factory en utilisant l'un des https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["expériences de la console"^] .
. Dans la mosaïque Charges de travail VMware, sélectionnez *Centre de planification VMware*.
+
Depuis le centre de planification, vous pouvez télécharger vos données d'inventaire de machine virtuelle, consulter les téléchargements de données d'inventaire précédents et planifier une migration à l'aide de l'un des ensembles de données d'inventaire de machine virtuelle.

. Sélectionnez *Télécharger l'inventaire de la machine virtuelle*.
. Choisissez la méthode de collecte de données à utiliser :


[role="tabbed-block"]
====
.Utiliser RVTools (évaluation rapide)
--
RVTools est une application Windows qui interagit avec vCenter et le serveur ESX (5.x à 8.0) pour capturer des informations sur vos environnements virtuels VMware. Il collecte des informations sur les VM, le processeur, la mémoire, les disques, les clusters, hôtes ESX, datastores, etc. Vous pouvez exporter ces informations dans un fichier xlsx à utiliser avec le conseiller de migration.

https://www.robware.net/home["En savoir plus sur RVTools"^]

.Étapes
. Sélectionnez la tuile *RVTools* et sélectionnez *Suivant*.
+
La page *préparer l'intégration au cloud AWS* s'affiche.

. Saisissez un nom pour l’ensemble de données d’inventaire de machine virtuelle que vous allez créer.
. Téléchargez et installez RVTools 4.4.2 ou version ultérieure à partir de https://www.robware.net/download["Site Web RVTools"^]
. Lancez RVTools et connectez-vous au serveur vCenter cible.
+
Les informations relatives à vCenter Server seront ainsi capturées.

. Exportez vos informations VMware dans un fichier xlsx ou xls.
+
 https://resources.robware.net/resources/prod/RVTools.pdf["Documentation RVTools"^]Pour plus de détails, reportez-vous au chapitre « Paramètres de ligne de commande » dans le.

. Sélectionnerimage:button-upload-file.png["le bouton de téléchargement"] et choisissez le fichier RVTools que vous avez exporté.
. Sélectionnez *Télécharger*.
. Sélectionnez *Terminer*.


--
.Utiliser le collecteur de données (planification détaillée)
--
Le script du collecteur de VM de NetApp migration Advisor collecte les informations de configuration de VM à partir de votre vCenter, comme RVTools collecte. Cependant, il capture les données de performances de VM actuelles pour fournir des statistiques réelles d'IOPS et de débit en lecture et écriture. Vous pouvez utiliser le script dans l'un des deux modes suivants :

* Collecte des données horaires
* Collecte quotidienne des données


Vous devez démarrer le conseiller migration pour copier le script du collecteur VM du conseiller migration à partir de la fenêtre Codebox.

.Avant de commencer
Le système sur lequel vous exécuterez le script Collector doit répondre aux exigences suivantes :

* Microsoft PowerShell 7.0 ou version ultérieure doit être installé. Reportez-vous à la https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell?view=powershell-7.4["Documentation Microsoft PowerShell"^] section si vous devez installer PowerShell.
* VMware PowerCLI doit être installé. Voir https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.esxi.install.doc/GUID-F02D0C2D-B226-4908-9E5C-2E783D41FE2D.html["Documentation VMware PowerCLI"^] si vous devez installer PowerCLI.
* La vérification du certificat SSL doit être désactivée.
* PowerShell doit autoriser l'exécution de scripts non signés.


Notez que si vous prévoyez de capturer des statistiques à long terme à partir de vos machines virtuelles (statistiques quotidiennes), vous devez avoir activé le niveau de statistiques 3 ou supérieur dans la console de gestion vSphere (environnement de gestion VMware).

.Étapes
. Sélectionnez la tuile *Collecteur de données* et sélectionnez *Suivant*.
+
La fenêtre Codebox s'affiche sur le côté droit de la page.

. Dans la fenêtre Codebox, sélectionnez soit image:button-download-codebox.png["le bouton de téléchargement"] pour enregistrer le script du collecteur de données de migration Advisor (nommé « list-vm.ps1 ») sur le système cible, soit image:button-copy-codebox.png["le bouton copier"]pour copier le script afin de le coller sur le système approprié.
. Pour capturer les configurations de vos machines virtuelles actuelles, procédez comme suit :
+
.. Connectez-vous au système sur lequel vous avez téléchargé le collecteur de données, sur lequel PowerShell et PowerCLI sont installés.
.. Connectez-vous à votre serveur VMware vCenter en exécutant la commande suivante :
+
[source, console]
----
Connect-VIServer -server <server_IP>
----
+
Remplacez <server_IP> par l'adresse IP ou le nom d'hôte de votre serveur VMware.

.. Exécutez le script de collecteur de données que vous avez téléchargé et spécifiez l'option de collecte de données pour les statistiques de VM « horaire » ou « quotidien ».
+
[source, console]
----
./list-vms.ps1 -PerformanceStatisticsTimePeriod <LastHour | LastDay>
----
+
où ?

+
*** *LastHour* collecte les données sur les IOPS et le débit de la dernière heure, par intervalles de 20 secondes.
*** *LastDay* collecte les données sur les IOPS et le débit des 24 dernières heures par intervalles de 5 minutes.




+
Vous pouvez éventuellement exécuter le script du collecteur de données sans spécifier d'options ; ceci vous permet de sélectionner la période de collecte de données dans le menu interactif.

+
+ Le script génère un fichier compressé avec un horodatage dans le nom dans le répertoire de travail actuel.  Le fichier .zip contient une liste de toutes les machines virtuelles et de leurs propriétés, ainsi que leurs données d'IOPS et de débit.

. Sélectionnez *Télécharger*.


--
.Informations exploitables sur l'infrastructure de données NetApp (planification détaillée)
--
NetApp Data Infrastructure Insights est un outil de surveillance de l'infrastructure cloud qui permet de bénéficier d'une grande visibilité sur l'ensemble de l'infrastructure. Vous devez activer la communication par API temporaire entre le conseiller en migration et Data Infrastructure Insights afin que le conseiller en migration puisse collecter des informations sur votre infrastructure VMware.

https://docs.netapp.com/us-en/data-infrastructure-insights/["En savoir plus sur les informations exploitables de l'infrastructure de données"^]

.Étapes
. Sélectionnez la mosaïque * Data Infrastructure Insights* et sélectionnez *Suivant*.
+
La page *préparer l'intégration au cloud AWS* s'affiche.

. Saisissez un nom pour l’ensemble de données d’inventaire de machine virtuelle que vous allez créer.
. Saisissez le point de terminaison du locataire pour Data Infrastructure Insights.
+
Il doit s'agir de l'URL que vous utilisez pour accéder aux informations exploitables de l'infrastructure de données.

. Si vous n'avez pas encore généré de jeton d'accès par API pour Data Infrastructure Insights, suivez les instructions qui s'affichent à la page pour en créer un. Sinon, collez votre jeton d'accès à l'API dans la zone de texte *entrer le jeton d'accès à l'API*.
. Sélectionnez *Télécharger*.
+
Workload Factory collecte des informations à partir de Data Infrastructure Insights.



--
====
.Et la suite ?
Gérez vos données d’inventaire de machines virtuelles téléchargées à partir du centre de planification ou créez un plan de déploiement.

* link:explore-planning-center.html["Explorez le centre de planification des charges de travail VMware"]
* link:launch-onboarding-advisor.html["Créer un plan de déploiement Amazon VMware Cloud"]
* link:launch-migration-advisor-evs.html["Créer un plan de déploiement Amazon Elastic VMware Service"]
* link:launch-onboarding-advisor-native.html["Créer un plan de déploiement Amazon EC2"]

